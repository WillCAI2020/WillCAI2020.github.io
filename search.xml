<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/1/</url>
    <content><![CDATA[Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).

<!--more-->
## Quick Start

### Create a new post

``` bash
$ hexo new "My New Post"
```

More info: [Writing](https://hexo.io/docs/writing.html)

### Run server

``` bash
$ hexo server
```

More info: [Server](https://hexo.io/docs/server.html)

### Generate static files

``` bash
$ hexo generate
```

More info: [Generating](https://hexo.io/docs/generating.html)

### Deploy to remote sites

``` bash
$ hexo deploy
```

More info: [Deployment](https://hexo.io/docs/one-command-deployment.html)]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>record</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°å½•æ¢ç´¢ Github Actions</title>
    <url>/3/</url>
    <content><![CDATA[
{% cq %}åœ¨å®è·µä¸­æˆé•¿ä¸å­¦ä¹ ï¼Œåœ¨å­¦ä¹ åå·©å›ºä¸æ•´ç†ã€‚{% endcq %}
<!--more-->

## æ¦‚è¿°

å¯¹äºé€šè¿‡ Github Actions éƒ¨ç½²åšå®¢ï¼Œå¤§æ¦‚å·²ç»æ‘¸æ¸…åŸç†ã€‚åˆ©ç”¨ Github Actions æä¾›çš„ç¯å¢ƒï¼ˆæˆ‘æ„¿ç§°å…¶ä¸ºè™šæ‹Ÿä¸»æœºï¼‰ï¼Œç¯å¢ƒä¸€èˆ¬é…ç½®ä¸º ubuntu-latest ï¼ˆæˆ‘å¯¹ Linux å¹¶ä¸æ˜¯å¾ˆç†Ÿï¼‰ã€‚ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œä¹Ÿæ˜¯å€Ÿé‰´åˆ«äººçš„ä»£ç ï¼Œç„¶åæ•´ç†ï¼Œå¹¶ç»“åˆä¸€ä¸‹è‡ªå·±çš„ç†è§£å®Œæˆ Github Actions çš„ jobsã€‚

é‚£ç¯‡æ–‡ç« å¾—åˆ°çš„ç»“æœæ˜¯æºç ä»¥åŠç”Ÿæˆçš„é™æ€æ–‡ä»¶å‡æ”¾åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“ï¼Œåªä¸è¿‡åˆ†å±ä¸¤ä¸ªåˆ†æ”¯è€Œå·²ï¼Œå¹¶ä¸å¦‚æˆ‘æ‰€æ„¿ã€‚

## æ–¹æ³•ä¸€

1. ### ä»£ç 

    ```yaml
    # æ–‡ä»¶è·¯å¾„ .github/workflows/deployment.yml
    name: Deployment

    on:
      push:
        branches: [master] # only push events on source branch trigger deployment

    jobs:
      hexo-deployment:
        runs-on: ubuntu-latest
        env:
          TZ: Asia/Shanghai

        steps:
        - name: Checkout source
          uses: actions/checkout@v2
          with:
            submodules: true

        - name: Setup Node.js
          uses: actions/setup-node@v1
          with:
            node-version: '12.x'

        - name: Install dependencies & Generate static files
          run: |
            node -v
            npm i -g hexo-cli
            npm i
            hexo clean
            hexo g        
        - name: Deploy to Github Pages
          env:
            GIT_NAME: WillCAI2020
            GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
            REPO: github.com/WillCAI2020/WillCAI2020.github.io
            GH_TOKEN: ${{ secrets.GH_TOKEN }}
          run: |
            cd ./public && git init && git add .
            git config --global user.name $GIT_NAME
            git config --global user.email $GIT_EMAIL
            git commit -m "Site deployed by GitHub Actions"
            git push --force --quiet "https://$GH_TOKEN@$REPO" master:master
    ```
2. ### æµç¨‹

    ä¸€ä¸ª Github Actions å¯ä»¥æœ‰å¾ˆå¤š jobs ï¼Œä¸Šè¿°ä»£ç å°±ä¸€ä¸ª`jobï¼šhexo-deployment`ï¼Œå¹¶ä¸”è®¾ç½®å®ƒå·¥ä½œåœ¨ ubuntu-latest ä¸Šï¼Œä¸€ä¸ª job è¿˜èƒ½åˆ†ä¸ºè®¸å¤š stepsï¼Œä½ å¯ä»¥ä¸ºæ¯ä¸ª step è®¾ç½®nameã€usesï¼ˆä½¿ç”¨ä»€ä¹ˆï¼Œå¯ä»¥é€‰æ‹©è‡ªå·±å†™çš„ actionsï¼Œä¹Ÿå¯ä»¥è°ƒç”¨[å®˜ç½‘æä¾›](https://github.com/actions)çš„ï¼Œæ¯”å¦‚`actions/checkout@v2`ï¼‰ã€withï¼ˆuses çš„ä¼´éšå‚æ•°ï¼‰ã€envï¼ˆrun æ‰€è°ƒç”¨çš„å‚æ•°ï¼‰ã€runï¼ˆåœ¨è™šæ‹Ÿä¸»æœºä¸Šè°ƒç”¨çš„å‘½ä»¤ï¼‰ã€‚

    ä»`secrets.GH_TOKEN`ä¸`secrets.GIT_EMAIL`å¯ä»¥çœ‹å‡ºï¼Œéœ€è¦è®¾ç½®ä»“åº“çš„å˜é‡æœ‰`GH_TOKEN`ä¸`GIT_EMAIL`ã€‚`GIT_NAMEã€GIT_EMAILã€GH_TOKENã€REPO`æ˜¯ `step:Deploy to Github Pages`è°ƒç”¨å‘½ä»¤æ‰€éœ€çš„çš„`env`å˜é‡ã€‚é¡ºåºæ‰§è¡Œï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºï¼š

    * é…ç½®ä¾èµ–ç¯å¢ƒï¼ˆè²Œä¼¼ä¸ç”¨è£… Gitï¼‰
      * å…ˆè°ƒç”¨å®˜ç½‘æä¾›çš„ actions é…ç½®äº†ç‰ˆæœ¬ä¸º `12.x çš„ nodejs`
      * ç„¶å `node -v`è§‚å¯Ÿæ˜¯å¦æˆåŠŸé…ç½®
      * å† `npm i -g hexo-cli`è£…å¥½ hexo
      * å†`npm i`è£…å¥½ä¾èµ–çš„åŒ…
      * ç„¶åå°±åˆ°ç†Ÿæ‚‰çš„ `hexo clean`ä¸`hexo generate`
    * æ¥ä¸‹æ¥æŠŠè™šæ‹Ÿä¸»æœºä¸Šæœ¬åœ°ä»“åº“æ ¹ç›®å½•ä¸­çš„ public æ–‡ä»¶å¤¹ ï¼ˆ`hexo generate`ç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼‰æäº¤åˆ°è¿œç¨‹ä»“åº“
      * è¿›å…¥ public æ–‡ä»¶å¤¹ åŒæ—¶å°†æ­¤æ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºä¸€ä¸ª Git ä»“åº“ï¼Œå¹¶æœ¬åœ°æäº¤ï¼ˆ`cd ./public && git init && git add .`ï¼‰
      * ç¡®å®šå…¨å±€ä¿¡æ¯
        * `git config --global user.name $GIT_NAM`
        * `git config --global user.email $GIT_EMAIL`
      * æäº¤ä¿¡æ¯ï¼ˆ`git commit -m "Site deployed by GitHub Actions"`ï¼‰
      * ä¸Šä¼ ï¼ˆ`git push --force --quiet "https://$GH_TOKEN@$REPO" master:master`ï¼‰
        * `master:master`å‰ä¸€ä¸ª master æŒ‡çš„æ˜¯è™šæ‹Ÿä¸»æœºä¸Šæœ¬åœ°åˆ†æ”¯ï¼Œåä¸€ä¸ª master åˆ™ä¸ºè¿œç¨‹ä»“åº“åˆ†æ”¯ã€‚
3. ### GH_TOKEN

    [è·å–](https://github.com/settings/tokens)ã€‚`Generate new token` æ¥ç”Ÿæˆï¼Œéšä¾¿ä½ å–ä»€ä¹ˆåå­—ï¼Œåªè¦å†…å®¹ä½ æ­£ç¡®æ‹·è´åˆ°ä»“åº“çš„ Secrets å˜é‡ä¸­å°±è¡Œäº†ã€‚è¿™ä¸ªä¸œè¥¿ç›¸å½“äºå¯†ç ï¼Œåˆ›å»ºçš„æ—¶å€™å¯ä»¥é€‰æ‹©è¿™ä¸ªå¯†ç å…è®¸å¹²äº›ä»€ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨è¿™ä¸ªæ¥æäº¤ä»£ç ä»“åº“ï¼Œæ•…è€Œå‹¾é€‰ repo å°±å¤Ÿäº†ï¼Œå¹¶ä¸”è¿™ä¸ª token æ˜¯èƒ½ä½œç”¨äºè¯¥è´¦å·çš„æ‰€æœ‰ä»“åº“ã€‚

    ç„¶åå‰å¾€æºç æ‰€åœ¨ä»“åº“ï¼Œæ·»åŠ  Secretsã€‚

    è¿™é‡Œå–çš„åå­—æ³¨æ„è¦å’Œä»£ç ä¸­çš„ç›¸åŒï¼Œä»£ç ä¸­è°ƒç”¨`secrets.GH_TOKEN`ï¼Œé‚£è¿™é‡Œçš„å°±è¦å‘½åä¸º GH_TOKENã€‚

    ![Secrets](https://s3.ax1x.com/2021/02/09/ydi1tP.png)
4. ### GIT_EMAIL

    è¿™ä¸ªç›´æ¥æ·»åŠ  Secretsï¼Œå†…å®¹ä¸ºè´¦å·ç»‘å®šçš„é‚®ç®±ã€‚å…¶å®è¿™ä¹Ÿæ²¡å¿…è¦æ·»åŠ ï¼Œç›´æ¥ env ä¸­å†™æ˜`GIT_EMAIL: è´¦å·é‚®ç®±`ã€‚
5. ### æœ€ç»ˆç‰ˆ

    è¯¦æƒ…è§æ­¤æ–‡ã€‚

## æ–¹æ³•äºŒ
1. ### æ¦‚è¿°
    é€šè¿‡ Docker å®¹å™¨ï¼ŒDocker å±äºæ“ä½œç³»ç»Ÿå±‚è™šæ‹ŸåŒ–ï¼Œç°åœ¨å¾ˆçƒ­é—¨ï¼Œæˆ‘ä¸æ‡‚è¿™ä¸ªã€‚

    æˆ‘æ ¹æ® [reuixiy](https://github.com/reuixiy/io-oi.me/) ä¸º Hugo åŸºäºDockerã€é€šè¿‡Arch Linux å®Œæˆ Actions æ‰€ç¼–å†™çš„ä»£ç ï¼Œæ”¹æˆäº†èƒ½å®ç° Hexo éƒ¨ç½²çš„ä»£ç ã€‚

    æ”¹ç¼–åä»£ç å¦‚ä¸‹ï¼š

    ```yaml
    # .github/workflows/build.yml
    name: build

    on:
      push:
        branches:
        - main

    jobs:
      build:
        runs-on: ubuntu-latest

        steps:
        - name: 'Checkout codes'
          uses: actions/checkout@v2
          with:
            submodules: true

        - name: 'Building...'
          uses: ./.github/actions/hexo-deploy
          env:
            DEPLOY_REPO: WillCAI2020/WillCAI2020.github.io
            DEPLOY_BRANCH: main
            DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
            # https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
            TZ: Asia/Shanghai 
    ```

    ```yaml
    # .github/actions/hexo-deploy/action.yml 
    name: 'hexo-deploy'
    author: 'according-reuixiy'
    description: 'Deploy your Hexo site to GitHub Pages, via GitHub Actions, with Arch Linux.'
    runs:
      using: 'docker'
      image: 'Dockerfile'
    branding:
      icon: 'arrow-up-circle'  
      color: 'yellow' 
    ```

    ```yaml
    # .github/actions/hexo-deploy/Dockerfile 
    FROM archlinux

    RUN pacman -Syu --noconfirm nodejs npm git openssh

    COPY entrypoint.sh /entrypoint.sh

    RUN chmod +x /entrypoint.sh
    ENTRYPOINT ["/entrypoint.sh"]
    ```

    ```sh
    # .github/actions/hexo-deploy/entrypoint.sh 
    #!/bin/bash
    # Required environment variables:
    #
    #   DEPLOY_KEY          SSH private key
    #
    #   DEPLOY_REPO         GitHub Pages repository
    #   DEPLOY_BRANCH       GitHub Pages publishing branch
    #
    #   GITHUB_ACTOR        GitHub username
    #   GITHUB_REPOSITORY   GitHub repository (source code)
    #
    #   TZ                  Timezone
    set -e
    REMOTE_REPO="git@github.com:${DEPLOY_REPO}.git"
    REMOTE_BRANCH="${DEPLOY_BRANCH}"
    git config --global user.name "${GITHUB_ACTOR}"
    git config --global user.email "${GITHUB_ACTOR}@users.noreply.github.com"
    # https://github.com/reuixiy/hugo-theme-meme/issues/27
    git config --global core.quotePath false
    ln -s /usr/share/zoneinfo/${TZ} /etc/localtime
    mkdir /root/.ssh
    ssh-keyscan -t rsa github.com > /root/.ssh/known_hosts && \
    echo "${DEPLOY_KEY}" > /root/.ssh/id_rsa && \
    chmod 400 /root/.ssh/id_rsa
    git clone --recurse-submodules "git@github.com:${GITHUB_REPOSITORY}.git" site && \
    cd site

    node -v
    npm i -g hexo-cli
    npm i
    hexo clean
    hexo g

    pushd public \
    && git init \
    && git remote add origin $REMOTE_REPO \
    && git add -A \
    && git checkout -b $REMOTE_BRANCH \
    && git commit -m "Automated deployment @ $(date '+%Y-%m-%d %H:%M:%S') ${TZ}" \
    && git push -f origin $REMOTE_BRANCH \
    && popd
    rm -rf /root/.ssh
    ```

    ä½¿ç”¨æ–¹æ³•å‚è€ƒ[æ­¤æ–‡](https://io-oi.me/tech/deploy-hugo-to-github-pages-via-github-actions/)å³å¯ã€‚

2. ### è¯´æ˜

    é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘æ¥è§¦å¹¶æµ…æ˜¾åœ°äº†è§£äº† Dockerï¼Œæ˜ç™½ Dockerfile ä¸­é€šè¿‡ `FROM archlinux` èƒ½æŒ‡æ˜æ“ä½œç³»ç»Ÿï¼Œä¸ºäº†æ›´æ”¹ Dockerfileï¼Œæˆ‘æœç´¢å¹¶å­¦ä¹ äº†ä¸€äº› ArchLinux çš„æŒ‡ä»¤ï¼Œæ¯”å¦‚é€šè¿‡ pacman æ¥å®‰è£…åŒ…ã€‚

    å¤§è‡´é˜…è§ˆäº†å¦‚ä¸‹æ–‡ç« ï¼š

    * [åœ¨ Docker ä¸­ä½¿ç”¨ Archlinux çš„æŠ˜è…¾è®°å½•](https://mogeko.me/2019/063/)
    * [pacman (ç®€ä½“ä¸­æ–‡)](https://wiki.archlinux.org/index.php/Pacman_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E6%89%8B%E5%8A%A8%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85_pacman)

3. ### æŠ¥é”™

    çªç„¶å‘ç° Github Actions æŠ¥é”™äº†ï¼ŒåŸå› æ˜¯ `failed to initialize alpm library`ï¼Œäºæ˜¯å»æŸ¥è¯¢è§£å†³æ–¹æ³•ï¼Œæ™®éç­”å¤ä¸ºä»¥ root æƒé™è¿è¡Œ `pacman-db-upgrade`å³å¯ï¼ˆæ˜¯å› ä¸º yaourt æ›´æ–° pacman ä»¥åï¼Œæ²¡æ›´æ–° pacman èµ„æ–™åº“çš„å…³ç³»ï¼‰ï¼Œäºæ˜¯æˆ‘åœ¨ Dockerfile ä¸­åŠ ä¸Šè¯¥å‘½ä»¤ï¼Œå´æŠ¥é”™ `You must have correct permissions to upgrade the database`ï¼Œæˆ‘è§‰å¾—æ˜¯æ²¡æœ‰ root æƒé™ï¼Œäºæ˜¯æ‰¾å¯»å¦‚ä½•åˆ‡æ¢ root æƒé™ï¼Œæœ€ç»ˆä¸äº†äº†ä¹‹ã€‚

    é˜…è§ˆä»¥ä¸‹æ–‡ç« ï¼š

    * [failed to initialize alpm library](https://blog.elleryq.idv.tw/2014/12/failed-to-initialize-alpm-library.html)
    * [Docker è¿è¡Œæ—¶çš„ç”¨æˆ·ä¸ç»„ç®¡ç†](https://segmentfault.com/a/1190000016781704)
    * [å¦‚ä½•è·å¾—dockerå®¹å™¨é‡Œé¢çš„rootæƒé™](https://blog.csdn.net/u012763794/article/details/80943472)
    * [Linuxç³»ç»Ÿä¸‹ -bash: apt-get: command not found](https://blog.csdn.net/u010741032/article/details/102606888)
    * [Shell echoå‘½ä»¤](https://www.runoob.com/linux/linux-shell-echo.html)
    * [Linux mkdir å‘½ä»¤](https://www.runoob.com/linux/linux-comm-mkdir.html)
    * [å®¹å™¨å†…ä½¿ç”¨sudo æŠ¥bash: sudo: command not found](https://blog.csdn.net/roxxo/article/details/90410259)
]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>record</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäº DarkMode å®ç°çš„æ·±è‰²ä¸»é¢˜</title>
    <url>/8/</url>
    <content><![CDATA[
<p class='div-border green'>åŸºäº DarkMode.js å®ç° Next ä¸»é¢˜çš„è‡ªå®šä¹‰æ·±è‰²æ¨¡å¼</p>

<!--more-->

## æ¦‚è¿°

ä¸Šä¸€ç§æ–¹æ³•å®ç°çš„æ·±è‰²æ¨¡å¼ä¸åŒ…å« cookies ç›¸å…³æ­¥éª¤ï¼Œæ‰€ä»¥åˆ‡æ¢é¡µé¢æ—¶æ— æ³•ä¿å­˜æ·±è‰²é…ç½®ã€‚äºæ˜¯æˆ‘æœç´¢ next è‡ªå®šä¹‰æ·±è‰²ä¸»é¢˜ï¼Œå‘ç°è®¸å¤šæ–‡ç« æåˆ°å¯ä»¥é€šè¿‡ darkmode.js å®ç°ï¼Œæ¯”å¦‚æ­¤æ–‡ï¼š[Hexoï¼ˆNext ä¸»é¢˜ï¼‰å®ç°å¯åˆ‡æ¢çš„ Dark Mode (æš—è‰²èƒŒæ™¯ / å¤œé—´æ¨¡å¼)](https://dog.wtf/tech/hexo-dark-mode-note/)ã€‚æˆ‘å°†å…¶ä¸­é€šè¿‡å®šåˆ¶ vendors ä»¥åŠ å…¥ darkmode,js å˜ä¸ºç›´æ¥åœ¨è‡ªå®šä¹‰ body-end.njk ä¸­å¼•å…¥ï¼Œæœ€ç»ˆå®ç°çš„ç»“æœå¹¶ä¸å¦‚æ„ã€‚äºæ˜¯æˆ‘å‰å¾€ DarkMode,js å¼€æºä»“åº“ï¼Œè‡ªå·±ä¿®æ”¹äº†ä¸€ç•ªï¼Œå®ç°äº†éœ€æ±‚ã€‚

<a href="https://github.com/sandoche/Darkmode.js" class="LinkCard">Darkmode.jsÂ ä»“åº“</a>

ä¸‹é¢ç›´æ¥æ”¾å‡ºå®ç°æ­¥éª¤ï¼Œæœ€åè°ˆä¸€ä¸‹å¦‚ä½•å®ç°çš„ï¼Œæƒå½“æ€»ç»“ã€‚

## å®ç°

1. ### åˆ›å»º darkmode.js

   é¦–å…ˆå¾—å¼•å…¥ darkmode.js ï¼Œå…ˆåœ¨`æ ¹ç›®å½•\source\js`ä¸­æ–°å»º darkmode.js ï¼Œå¡«å…¥ä»¥ä¸‹ä»£ç ï¼š

   {% fold ç‚¹å‡»æ˜¾/éšä»£ç  %}

   ```javascript
   !(function (e, t) {
     "object" == typeof exports && "object" == typeof module
       ? (module.exports = t())
       : "function" == typeof define && define.amd
       ? define("darkmode-js", [], t)
       : "object" == typeof exports
       ? (exports["darkmode-js"] = t())
       : (e["darkmode-js"] = t());
   })("undefined" != typeof self ? self : this, function () {
     return (function (e) {
       var t = {};
       function n(o) {
         if (t[o]) return t[o].exports;
         var r = (t[o] = { i: o, l: !1, exports: {} });
         return e[o].call(r.exports, r, r.exports, n), (r.l = !0), r.exports;
       }
       return (
         (n.m = e),
         (n.c = t),
         (n.d = function (e, t, o) {
           n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: o });
         }),
         (n.r = function (e) {
           "undefined" != typeof Symbol &&
             Symbol.toStringTag &&
             Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
             Object.defineProperty(e, "__esModule", { value: !0 });
         }),
         (n.t = function (e, t) {
           if ((1 & t && (e = n(e)), 8 & t)) return e;
           if (4 & t && "object" == typeof e && e && e.__esModule) return e;
           var o = Object.create(null);
           if (
             (n.r(o),
             Object.defineProperty(o, "default", { enumerable: !0, value: e }),
             2 & t && "string" != typeof e)
           )
             for (var r in e)
               n.d(
                 o,
                 r,
                 function (t) {
                   return e[t];
                 }.bind(null, r)
               );
           return o;
         }),
         (n.n = function (e) {
           var t =
             e && e.__esModule
               ? function () {
                   return e.default;
                 }
               : function () {
                   return e;
                 };
           return n.d(t, "a", t), t;
         }),
         (n.o = function (e, t) {
           return Object.prototype.hasOwnProperty.call(e, t);
         }),
         (n.p = ""),
         n((n.s = 0))
       );
     })([
       function (e, t, n) {
         "use strict";
         Object.defineProperty(t, "__esModule", { value: !0 }),
           (t.default = void 0);
         var o = (function (e) {
           if (e && e.__esModule) return e;
           var t = {};
           if (null != e)
             for (var n in e)
               if (Object.prototype.hasOwnProperty.call(e, n)) {
                 var o =
                   Object.defineProperty && Object.getOwnPropertyDescriptor
                     ? Object.getOwnPropertyDescriptor(e, n)
                     : {};
                 o.get || o.set ? Object.defineProperty(t, n, o) : (t[n] = e[n]);
               }
           return (t.default = e), t;
         })(n(1));
         var r = o.default;
         (t.default = r),
           o.IS_BROWSER &&
             (function (e) {
               e.Darkmode = o.default;
             })(window),
           (e.exports = t.default);
       },
       function (e, t, n) {
         "use strict";
         function o(e, t) {
           for (var n = 0; n < t.length; n++) {
             var o = t[n];
             (o.enumerable = o.enumerable || !1),
               (o.configurable = !0),
               "value" in o && (o.writable = !0),
               Object.defineProperty(e, o.key, o);
           }
         }
         Object.defineProperty(t, "__esModule", { value: !0 }),
           (t.default = t.IS_BROWSER = void 0);
         var r = "undefined" != typeof window;
         t.IS_BROWSER = r;
         var a = (function () {
           function e(t) {
             if (
               ((function (e, t) {
                 if (!(e instanceof t))
                   throw new TypeError("Cannot call a class as a function");
               })(this, e),
               r)
             ) {
               t = Object.assign(
                 {},
                 {
                   bottom: "32px",
                   right: "32px",
                   left: "unset",
                   time: "0.3s",
                   buttonColorDark: "#100f2c",
                   buttonColorLight: "#fff",
                   label: "",
                   saveInCookies: !0,
                   autoMatchOsTheme: !0,
                 },
                 t
               );
               var n = "\n      .darkmode-layer {\n        position: fixed;\n        pointer-events: none;\n        background: "
                   
                   .concat(
                     t.time,
                     " ease;\n              }\n\n      .darkmode-layer--button {\n        width: 2.9rem;\n        height: 2.9rem;\n        border-radius: 50%;\n        right: "
                   )
                   .concat(t.right, ";\n        bottom: ")
                   .concat(t.bottom, ";\n        left: ")
                   .concat(
                     t.left,
                     ";\n      }\n\n      .darkmode-layer--simple {\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        transform: scale(1) !important;\n      }\n\n      .darkmode-layer--expanded {\n        transform: scale(100);\n        border-radius: 0;\n      }\n\n      .darkmode-layer--no-transition {\n        transition: none;\n      }\n\n      .darkmode-toggle {\n        background: "
                   )
                   .concat(
                     t.buttonColorDark,
                     ";\n        width: 3rem;\n        height: 3rem;\n        position: fixed;\n        border-radius: 50%;\n        border:none;\n        right: "
                   )
                   .concat(t.right, ";\n        bottom: ")
                   .concat(t.bottom, ";\n        left: ")
                   .concat(
                     t.left,
                     ";\n        cursor: pointer;\n        transition: all 0.5s ease;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .darkmode-toggle--white {\n        background: "
                   )
                   .concat(
                     t.buttonColorLight,
                     ";\n      }\n\n      .darkmode-toggle--inactive {\n        display: none;\n      }\n\n      .darkmode-background {\n        background: "
                   ),
                 o = document.createElement("div"),
                 a = document.createElement("button"),
                 i = document.createElement("div");
               (a.innerHTML = t.label),
                 a.classList.add("darkmode-toggle--inactive"),
                 o.classList.add("darkmode-layer"),
                 i.classList.add("darkmode-background");
               var d = "true" === window.localStorage.getItem("darkmode"),
                 s =
                   t.autoMatchOsTheme &&
                   window.matchMedia("(prefers-color-scheme: dark)").matches,
                 l = null === window.localStorage.getItem("darkmode");
               ((!0 === d && t.saveInCookies) || (l && s)) &&
                 (o.classList.add(
                   "darkmode-layer--expanded",
                   "darkmode-layer--simple",
                   "darkmode-layer--no-transition"
                 ),
                 a.classList.add("darkmode-toggle--white"),
                 document.body.classList.add("darkmode--activated")),
                 document.body.insertBefore(a, document.body.firstChild),
                 document.body.insertBefore(o, document.body.firstChild),
                 document.body.insertBefore(i, document.body.firstChild),
                 this.addStyle(n),
                 (this.button = a),
                 (this.layer = o),
                 (this.saveInCookies = t.saveInCookies),
                 (this.time = t.time);
             }
           }
           var t, n, a;
           return (
             (t = e),
             (n = [
               {
                 key: "addStyle",
                 value: function (e) {
                   var t = document.createElement("link");
                   t.setAttribute("rel", "stylesheet"),
                     t.setAttribute("type", "text/css"),
                     t.setAttribute(
                       "href",
                       "data:text/css;charset=UTF-8," + encodeURIComponent(e)
                     ),
                     document.head.appendChild(t);
                 },
               },
               {
                 key: "showWidget",
                 value: function () {
                   var e = this;
                   if (r) {
                     var t = this.button,
                       n = this.layer,
                       o = 1e3 * parseFloat(this.time);
                     t.classList.add("darkmode-toggle"),
                       t.classList.remove("darkmode-toggle--inactive"),
                       t.setAttribute("aria-label", "Activate dark mode"),
                       t.setAttribute("aria-checked", "false"),
                       t.setAttribute("role", "checkbox"),
                       n.classList.add("darkmode-layer--button"),
                       t.addEventListener("click", function () {
                         var r = e.isActivated();
                         r
                           ? (n.classList.remove("darkmode-layer--simple"),
                             t.setAttribute("disabled", !0),
                             setTimeout(function () {
                               n.classList.remove("darkmode-layer--no-transition"),
                                 n.classList.remove("darkmode-layer--expanded"),
                                 t.removeAttribute("disabled");
                             }, 1))
                           : (n.classList.add("darkmode-layer--expanded"),
                             t.setAttribute("disabled", !0),
                             setTimeout(function () {
                               n.classList.add("darkmode-layer--no-transition"),
                                 n.classList.add("darkmode-layer--simple"),
                                 t.removeAttribute("disabled");
                             }, o)),
                           t.classList.toggle("darkmode-toggle--white"),
                           document.body.classList.toggle("darkmode--activated"),
                           window.localStorage.setItem("darkmode", !r);
                       });
                   }
                 },
               },
               {
                 key: "toggle",
                 value: function () {
                   if (r) {
                     var e = this.layer,
                       t = this.isActivated(),
                       n = this.button;
                     e.classList.toggle("darkmode-layer--simple"),
                       document.body.classList.toggle("darkmode--activated"),
                       window.localStorage.setItem("darkmode", !t),
                       n.setAttribute("aria-label", "De-activate dark mode"),
                       n.setAttribute("aria-checked", "true");
                   }
                 },
               },
               {
                 key: "isActivated",
                 value: function () {
                   return r
                     ? document.body.classList.contains("darkmode--activated")
                     : null;
                 },
               },
             ]) && o(t.prototype, n),
             a && o(t, a),
             e
           );
         })();
         t.default = a;
       },
     ]);
   });
   ```

   {% endfold %}

   <p class='div-border yellow'>æ­¤ darkmode.js æ˜¯æˆ‘åŸºäºåŸç‰ˆ darkmode.jsï¼ŒåŠ ä¸Šè‡ªå·±å¯¹æ–‡ä»¶å†…å®¹æµ…æ˜¾çš„ç†è§£ï¼Œæœ€åç»è¿‡å®è·µæ”¹åŠ¨äº†ä¸€å°éƒ¨åˆ†æ‰€å¾—çš„æˆå“</p>

2. ### å¼•å…¥ darkmode.js

    ç„¶ååœ¨æ ¹ç›®å½•`\source\_data\body-end.njk`åŠ å…¥ä»¥ä¸‹ä»£ç ä»¥å¼•å…¥ darkmode.jsï¼š

   ```nginx
   {%- if theme.darkmode_js.enable %}
     <script src="/js/darkmode.js"></script>
   {%- endif %}
   ```

3. ### è°ƒç”¨

   æœ€ååœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼ˆ`\source\_data\body-end.njk`ï¼‰ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç æ¥é…ç½®ç›¸åº”çš„å‚æ•°å¹¶è°ƒç”¨ js ä¸­çš„å‡½æ•°ï¼š

   ```nginx
   {%- if theme.darkmode_js.enable %}
   <script>
   var options = {
     bottom: '64px', // default: '32px'
     right: '32px', // default: '32px'
     left: 'unset', // default: 'unset'
     time: '0.5s', // default: '0.3s'
     buttonColorDark: '#100f2c',  // default: '#100f2c'
     buttonColorLight: '#fff', // default: '#fff'
     saveInCookies: true, // default: true,
     label: 'ğŸŒ“', // default: ''
     autoMatchOsTheme: true // default: true
   }
   const darkmode = new Darkmode(options);
   darkmode.showWidget();
   </script>
   {%- endif %}
   ```

4. ### è‡ªå®šä¹‰æ·±è‰²æ ·å¼

   å½“ä½ åšå®Œä¸Šè¿°æ­¥éª¤ï¼Œé¢„è§ˆç•Œé¢æ˜¯å°†èƒ½åœ¨é¡µé¢å·¦ä¸‹è§’çœ‹åˆ°åˆ‡æ¢æŒ‰é’®'ğŸŒ“'ã€‚ç‚¹å‡»è¿™ä¸ªæŒ‰é’®åï¼Œé¡µé¢ä¸­ body å…ƒç´ å°†åŠ ä¸Šç±» darkmode--activatedï¼Œæ•…è€Œæ·±è‰²æ¨¡å¼ä¸‹è®¸å¤šå…ƒç´ æ ·å¼æˆ‘ä»¬å°†èƒ½åˆ©ç”¨ç±» darkmode--activated æ¥è‡ªå·±å®šä¹‰ï¼ˆçº¯ä¸º css å†…å®¹ï¼‰ã€‚

   ä¿®æ”¹æ ·å¼è‡ªç„¶ä¸ next å…¨èƒ½çš„è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ styles.styl æœ‰å…³å•¦ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å…¶ä¸­åŠ å…¥å±äºä½ è‡ªå·±çš„æ ·å¼ã€‚

	ä¸‹é¢è´´å‡ºå¯¹æˆ‘æ¥è¯´æ¯”è¾ƒé€‚åˆçš„æ·±è‰²æ¨¡å¼é…ç½®ï¼Œæƒå½“å‚è€ƒï¼š

	{% fold ç‚¹å‡»æ˜¾/éšä»£ç  %}
	
	```css
	//ä¿®æ”¹darkmode.jsæ ·å¼
	.darkmode--activated {
	  background: #000 !important;	/* å»é™¤mix-blend-modeå®ç°èƒŒæ™¯ */
	}
	/*ä¸»ä½“ main-inner */
	.darkmode--activated .main-inner{
	  background: rgba(40,44,52,0.5);	/*åŒºåˆ†é˜´å½±åº¦*/
	}
	/* æ–‡ç« å— post-block */
	.darkmode--activated .post-block{
	  opacity: 1;
	  background: #282c34;				/*èƒŒæ™¯é¢œè‰²*/
	  color: #92fbfb;					/*æ–‡å­—é¢œè‰²*/
	}
	/* é¡µè„š */
	.darkmode--activated .footer{
	  color: #92fbfb;					/*é¡µè„šé¢œè‰²*/
	}
	/* æ–‡ç« å°¾éƒ¨ä¸Šä¸‹æ–‡ */
	.darkmode--activated .post-nav-item a{
	  color: #92fbfb;					/*ä¸Šä¸‹æ–‡é¢œè‰²*/
	  &:hover {
	    color: #FFD700;					/* ç§»åŠ¨è‡³æ‰€æ˜¾ç°é¢œè‰²*/
	  }
	}
	
	/* headerä¸Šéƒ¨çš„ä¸‹éƒ¨ */
	.darkmode--activated .main-menu{
	  background: #282c34;				/*headerä¸Šéƒ¨åˆ†é¢œè‰²*/
	  border-radius: 0 0 $myradius $myradius;	/*è®¾ç½®åœ†è§’*/
	}
	.darkmode--activated .menu-item a{
	  &:hover {
		border-radius: $myradius;
	    background: #382d2d;			/* ç§»åŠ¨è‡³æ‰€æ˜¾ç°é¢œè‰²*/
		color: aqua;
	  }
	}
	.darkmode--activated a.menu-item-active{
		border-radius: $myradius;
	    background: #382d2d;			/* é€‰ä¸­æ—¶æ˜¾ç°é¢œè‰²*/
	}
	
	/* è®¾ç½® brand èƒŒæ™¯ */
	.darkmode--activated .site-brand-container{
	  background: url(https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/header-bg1.jpg);
	  background-repeat: repeat;
	  background-position: 70% 20%;
	  background-size: cover;
	}
	/* è®¾ç½®headerä¸‹éƒ¨ */
	.darkmode--activated .sidebar-inner{
		background: #282c34;
	}
	.darkmode--activated .site-state-item a{
	  &:hover {
		color: aqua;
	  }
	}
	.darkmode--activated .links-of-author-item a{
	  &:hover {
		background: #382d2d;
		color: aqua;
	  }
	}
	
	/* è®¾ç½®äºŒçº§æ ‡é¢˜ */
	.darkmode--activated  .sub-menu{
	  background: #282c34;
	}
	
	/* æœç´¢é¡µé¢èƒŒæ™¯é¢œè‰² */
	.darkmode--activated  .search-header,
	.darkmode--activated  .search-result-container{
	  background: #282c34 !important;
	}
	
	/* æœç´¢é¡µé¢å­—ä½“é¢œè‰² */
	.darkmode--activated  .search-input,
	.darkmode--activated  .search-result-container,
	.darkmode--activated  .search-result-list a{
	  color: white;
	}
	/* æœç´¢é¡µé¢é¼ æ ‡åˆ’å…¥å˜åŒ– */
	.darkmode--activated  .search-result-list a{
	  border-bottom: 1px solid white;
	  &:hover {
		color: aqua;
		border-bottom: 1px solid aqua;
	  } 
	}
	/* live2d æ–‡å­—é¢œè‰² */
	.darkmode--activated  #waifu-tips{
	  color: white;
	}
	.darkmode--activated  #waifu-tips span{
	  color: purple;
	}
	/* è®¾ç½®post-metaè¶…é“¾æ¥ */
	.darkmode--activated .post-meta-item a{
	  color: #4169E1;
	  border-bottom: none;
	  border-bottom: 1px solid #0593d3;
	  &:hover {
	    color: #FFD700;
	    border-bottom: none;
	    border-bottom: 1px solid #fc6423;
	  }
	}
	
	.darkmode--activated  .comments{
	  background: #282c34;
	}
	.darkmode--activated  a.vlogin-btn,
	.darkmode--activated  .vnick,
	.darkmode--activated  .vmail,
	.darkmode--activated  .vlink,
	.darkmode--activated  .vmail,
	.darkmode--activated  .veditor,
	.darkmode--activated  .vinput p,
	.darkmode--activated  .vinput h1,
	.darkmode--activated  .vinput h2,
	.darkmode--activated  .vinput h3{
		color: #92fbfb !important
	}
	.darkmode--activated  a.vlogin-btn{
	  &:hover {
	    color: #FFD700 !important;
	  }
	}
	```
	
	{% endfold %}
	
	ä»¥ä¸Šæ ·å¼æ˜¯æˆ‘é€šè¿‡ F12ï¼ŒæŒ‰ç…§è‡ªå·±çš„å®¡ç¾è§‚é…ç½®å‡ºçš„ã€‚ç”±äºæˆ‘å¯¹ CSS å¹¶æœªæœ‰å¤ªæ·±å…¥çš„äº†è§£ï¼Œæ‰€ä»¥ä»£ç å†™çš„æ¯”è¾ƒç®€é™‹ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œå®Œæˆç½‘é¡µæ·±è‰²æ¨¡å¼çš„é€‚é…æ— éå°±æ˜¯å“ªé‡Œä¸å–œæ¬¢æ”¹å“ªé‡Œï¼ˆç½‘é¡µçš„ç¾åŒ–ä¹Ÿå°±æ˜¯è¿™æ ·ï¼‰ã€‚



## å†ç¨‹

æœ€åå™è¿°ä¸€ä¸‹å†ç¨‹ã€‚ï¼ˆPSï¼šå•çº¯çš„è®°å½•ä¸€ä¸‹è‡ªå·±æ„šè ¢çš„å†ç¨‹è€Œå·²ğŸ˜¶ï¼‰

å› å¯¹ä¸Šä¸€ç§æ— æ³•ä¿å­˜å·²é€‰çš„æ¨¡å¼çš„æ·±è‰²åˆ‡æ¢åŠŸèƒ½ä¸æ»¡ï¼Œæˆ‘ä¾¿æ‰¾å¯»å„ç§æ•™ç¨‹ã€‚äºæ˜¯å¾ˆå¿«é‡ä¸Šå¹¶åº”ç”¨äº† darkmode.jsã€‚å®ç°åå‘ä¸‹é¡µé¢å¾ˆå¤šåœ°æ–¹é¢œè‰²å¾ˆæ€ªå¼‚ï¼Œäºæ˜¯æˆ‘å‰å¾€ body-end.njk ä¸­ä¿®æ”¹é»˜è®¤é…ç½®ï¼ˆè§[å®˜æ–¹ä»“åº“](https://github.com/sandoche/Darkmode.js)ï¼‰ã€‚å½“æˆ‘ä¿®æ”¹ mixColor è¿™ä¸ªå‚æ•°åï¼Œå‘ç°é¡µé¢æ€ªå¼‚é¢œè‰²ä¹Ÿåœ¨å˜åŒ–ï¼Œäºæ˜¯è®¤å®šæ˜¯ mixColor çš„åŸå› ã€‚

é¡µé¢çš„æ ·å¼ç”± css æ§åˆ¶ï¼Œè€Œ body-end.njk ä¸­æ²¡æœ‰ï¼Œé‚£ä¹ˆç›¸åº”çš„æ ·å¼è‚¯å®šæ”¾åœ¨å¦ä¸€ä¸ªæ–°å¯¼å…¥çš„æ–‡ä»¶ darkmode.js ä¸­ï¼Œæ‰“å¼€åŸç‰ˆæ–‡ä»¶ï¼ˆæ­¤ darkmode.js æ˜¯æˆ‘æ ¼å¼åŒ–å®˜æ–¹ darkmode-js.min.js æ‰€å¾—åˆ°çš„ï¼‰ï¼Œå…¨å±€æœç´¢ mixColorã€‚

{% fold ç‚¹å‡»æ˜¾/éšä»£ç  %}

```javascript
!(function (e, t) {
  "object" == typeof exports && "object" == typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define("darkmode-js", [], t)
    : "object" == typeof exports
    ? (exports["darkmode-js"] = t())
    : (e["darkmode-js"] = t());
})("undefined" != typeof self ? self : this, function () {
  return (function (e) {
    var t = {};
    function n(o) {
      if (t[o]) return t[o].exports;
      var r = (t[o] = { i: o, l: !1, exports: {} });
      return e[o].call(r.exports, r, r.exports, n), (r.l = !0), r.exports;
    }
    return (
      (n.m = e),
      (n.c = t),
      (n.d = function (e, t, o) {
        n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: o });
      }),
      (n.r = function (e) {
        "undefined" != typeof Symbol &&
          Symbol.toStringTag &&
          Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
          Object.defineProperty(e, "__esModule", { value: !0 });
      }),
      (n.t = function (e, t) {
        if ((1 & t && (e = n(e)), 8 & t)) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var o = Object.create(null);
        if (
          (n.r(o),
          Object.defineProperty(o, "default", { enumerable: !0, value: e }),
          2 & t && "string" != typeof e)
        )
          for (var r in e)
            n.d(
              o,
              r,
              function (t) {
                return e[t];
              }.bind(null, r)
            );
        return o;
      }),
      (n.n = function (e) {
        var t =
          e && e.__esModule
            ? function () {
                return e.default;
              }
            : function () {
                return e;
              };
        return n.d(t, "a", t), t;
      }),
      (n.o = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t);
      }),
      (n.p = ""),
      n((n.s = 0))
    );
  })([
    function (e, t, n) {
      "use strict";
      Object.defineProperty(t, "__esModule", { value: !0 }),
        (t.default = void 0);
      var o = (function (e) {
        if (e && e.__esModule) return e;
        var t = {};
        if (null != e)
          for (var n in e)
            if (Object.prototype.hasOwnProperty.call(e, n)) {
              var o =
                Object.defineProperty && Object.getOwnPropertyDescriptor
                  ? Object.getOwnPropertyDescriptor(e, n)
                  : {};
              o.get || o.set ? Object.defineProperty(t, n, o) : (t[n] = e[n]);
            }
        return (t.default = e), t;
      })(n(1));
      var r = o.default;
      (t.default = r),
        o.IS_BROWSER &&
          (function (e) {
            e.Darkmode = o.default;
          })(window),
        (e.exports = t.default);
    },
    function (e, t, n) {
      "use strict";
      function o(e, t) {
        for (var n = 0; n < t.length; n++) {
          var o = t[n];
          (o.enumerable = o.enumerable || !1),
            (o.configurable = !0),
            "value" in o && (o.writable = !0),
            Object.defineProperty(e, o.key, o);
        }
      }
      Object.defineProperty(t, "__esModule", { value: !0 }),
        (t.default = t.IS_BROWSER = void 0);
      var r = "undefined" != typeof window;
      t.IS_BROWSER = r;
      var a = (function () {
        function e(t) {
          if (
            ((function (e, t) {
              if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function");
            })(this, e),
            r)
          ) {
            t = Object.assign(
              {},
              {
                bottom: "32px",
                right: "32px",
                left: "unset",
                time: "0.3s",
                mixColor: "#fff",
                backgroundColor: "#fff",
                buttonColorDark: "#100f2c",
                buttonColorLight: "#fff",
                label: "",
                saveInCookies: !0,
                autoMatchOsTheme: !0,
              },
              t
            );
            var n = "\n      .darkmode-layer {\n        position: fixed;\n        pointer-events: none;\n        background: "
                .concat(t.mixColor, ";\n        transition: all ")
                .concat(
                  t.time,
                  " ease;\n        mix-blend-mode: difference;\n      }\n\n      .darkmode-layer--button {\n        width: 2.9rem;\n        height: 2.9rem;\n        border-radius: 50%;\n        right: "
                )
                .concat(t.right, ";\n        bottom: ")
                .concat(t.bottom, ";\n        left: ")
                .concat(
                  t.left,
                  ";\n      }\n\n      .darkmode-layer--simple {\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        transform: scale(1) !important;\n      }\n\n      .darkmode-layer--expanded {\n        transform: scale(100);\n        border-radius: 0;\n      }\n\n      .darkmode-layer--no-transition {\n        transition: none;\n      }\n\n      .darkmode-toggle {\n        background: "
                )
                .concat(
                  t.buttonColorDark,
                  ";\n        width: 3rem;\n        height: 3rem;\n        position: fixed;\n        border-radius: 50%;\n        border:none;\n        right: "
                )
                .concat(t.right, ";\n        bottom: ")
                .concat(t.bottom, ";\n        left: ")
                .concat(
                  t.left,
                  ";\n        cursor: pointer;\n        transition: all 0.5s ease;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .darkmode-toggle--white {\n        background: "
                )
                .concat(
                  t.buttonColorLight,
                  ";\n      }\n\n      .darkmode-toggle--inactive {\n        display: none;\n      }\n\n      .darkmode-background {\n        background: "
                )
                .concat(
                  t.backgroundColor,
                  ";\n        position: fixed;\n        pointer-events: none;\n        z-index: -10;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n      }\n\n      img, .darkmode-ignore {\n        isolation: isolate;\n        display: inline-block;\n      }\n\n      @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n        .darkmode-toggle {display: none !important}\n      }\n\n      @supports (-ms-ime-align:auto), (-ms-accelerator:true) {\n        .darkmode-toggle {display: none !important}\n      }\n    "
                ),
              o = document.createElement("div"),
              a = document.createElement("button"),
              i = document.createElement("div");
            (a.innerHTML = t.label),
              a.classList.add("darkmode-toggle--inactive"),
              o.classList.add("darkmode-layer"),
              i.classList.add("darkmode-background");
            var d = "true" === window.localStorage.getItem("darkmode"),
              s =
                t.autoMatchOsTheme &&
                window.matchMedia("(prefers-color-scheme: dark)").matches,
              l = null === window.localStorage.getItem("darkmode");
            ((!0 === d && t.saveInCookies) || (l && s)) &&
              (o.classList.add(
                "darkmode-layer--expanded",
                "darkmode-layer--simple",
                "darkmode-layer--no-transition"
              ),
              a.classList.add("darkmode-toggle--white"),
              document.body.classList.add("darkmode--activated")),
              document.body.insertBefore(a, document.body.firstChild),
              document.body.insertBefore(o, document.body.firstChild),
              document.body.insertBefore(i, document.body.firstChild),
              this.addStyle(n),
              (this.button = a),
              (this.layer = o),
              (this.saveInCookies = t.saveInCookies),
              (this.time = t.time);
          }
        }
        var t, n, a;
        return (
          (t = e),
          (n = [
            {
              key: "addStyle",
              value: function (e) {
                var t = document.createElement("link");
                t.setAttribute("rel", "stylesheet"),
                  t.setAttribute("type", "text/css"),
                  t.setAttribute(
                    "href",
                    "data:text/css;charset=UTF-8," + encodeURIComponent(e)
                  ),
                  document.head.appendChild(t);
              },
            },
            {
              key: "showWidget",
              value: function () {
                var e = this;
                if (r) {
                  var t = this.button,
                    n = this.layer,
                    o = 1e3 * parseFloat(this.time);
                  t.classList.add("darkmode-toggle"),
                    t.classList.remove("darkmode-toggle--inactive"),
                    t.setAttribute("aria-label", "Activate dark mode"),
                    t.setAttribute("aria-checked", "false"),
                    t.setAttribute("role", "checkbox"),
                    n.classList.add("darkmode-layer--button"),
                    t.addEventListener("click", function () {
                      var r = e.isActivated();
                      r
                        ? (n.classList.remove("darkmode-layer--simple"),
                          t.setAttribute("disabled", !0),
                          setTimeout(function () {
                            n.classList.remove("darkmode-layer--no-transition"),
                              n.classList.remove("darkmode-layer--expanded"),
                              t.removeAttribute("disabled");
                          }, 1))
                        : (n.classList.add("darkmode-layer--expanded"),
                          t.setAttribute("disabled", !0),
                          setTimeout(function () {
                            n.classList.add("darkmode-layer--no-transition"),
                              n.classList.add("darkmode-layer--simple"),
                              t.removeAttribute("disabled");
                          }, o)),
                        t.classList.toggle("darkmode-toggle--white"),
                        document.body.classList.toggle("darkmode--activated"),
                        window.localStorage.setItem("darkmode", !r);
                    });
                }
              },
            },
            {
              key: "toggle",
              value: function () {
                if (r) {
                  var e = this.layer,
                    t = this.isActivated(),
                    n = this.button;
                  e.classList.toggle("darkmode-layer--simple"),
                    document.body.classList.toggle("darkmode--activated"),
                    window.localStorage.setItem("darkmode", !t),
                    n.setAttribute("aria-label", "De-activate dark mode"),
                    n.setAttribute("aria-checked", "true");
                }
              },
            },
            {
              key: "isActivated",
              value: function () {
                return r
                  ? document.body.classList.contains("darkmode--activated")
                  : null;
              },
            },
          ]) && o(t.prototype, n),
          a && o(t, a),
          e
        );
      })();
      t.default = a;
    },
  ]);
});
```

{% endfold  %}

å¾ˆå®¹æ˜“æ‰¾åˆ° 116 è¡Œå¼€å§‹çš„å‚æ•°ä»¥åŠæ ·å¼é…ç½®ã€‚å…¶ä¸­æœ‰è®¸å¤šå±æ€§å¹¶ä¸è®¤è¯†ï¼Œå…¨æ–‡å°±å‡ºç°ä¸¤æ¬¡ mixColorï¼Œä¸€æ¬¡æ˜¯å‚æ•°èµ‹å€¼ï¼Œå¦ä¸€æ¬¡æ˜¯ t.mixColorï¼Œäºæ˜¯çŒœæµ‹ä¸ t æœ‰å…³ï¼ŒåŒæ—¶æœç´¢ä¸ mix æœ‰å…³è¯çœ¼ï¼Œå‘ç°äº†å°±å‡ºç°ä¸‰æ¬¡ï¼Œä¸¤æ¬¡ä¸º mixColorï¼Œè¿˜æœ‰ä¸€æ¬¡ mix-blend-modeï¼Œæˆ‘è§å…¶å†™æ³•åƒ css å±æ€§ï¼Œäºæ˜¯æœç´¢äº†è§£åˆ°[è¯¥å±æ€§](https://developer.mozilla.org/zh-CN/docs/Web/CSS/mix-blend-mode)æè¿°äº†å…ƒç´ çš„å†…å®¹åº”è¯¥ä¸å…ƒç´ çš„ç›´ç³»çˆ¶å…ƒç´ çš„å†…å®¹å’Œå…ƒç´ çš„èƒŒæ™¯å¦‚ä½•æ··åˆã€‚æˆ‘åœ¨ PS ä¸­è§è¿‡ä»¥å·®å€¼æ–¹å¼æ··åˆé¢œè‰²ï¼Œæ•…è€Œä¹Ÿå¤§æ¦‚æ˜ç™½äº†é¡µé¢å‡ºç°æ€ªå¼‚é¢œè‰²çš„åŸå› ã€‚

æ¥ç€æˆ‘æƒ³åˆ°èƒ½å¦ä¸ç”¨è¿™ä¹ˆé«˜æ·±çš„æ–¹æ³•å®ç°æ·±è‰²ï¼Œç®€å•ç‚¹ç”¨ css æ¢é¢œè‰²å°±è¡Œäº†ã€‚äºæ˜¯æˆ‘å°è¯•åˆ å» mix æœ‰å…³è¯­å¥ï¼Œç»è¿‡æ•°æ¬¡è¯•éªŒåï¼Œé¢„è§ˆç»ˆäºä¸æŠ¥é”™ã€‚æ¥ç€å†æƒ³å¦‚ä½•åˆ©ç”¨æ·±è‰²æ¨¡å¼ä¸‹çš„é€‰æ‹©å™¨å®ç°ç‚¹å‡»æŒ‰é’®æ¢é¢œè‰²ã€‚ä»”ç»†æµè§ˆå®˜æ–¹è¯´æ˜ï¼Œå‘ç°è¿™ä¸€æ¡å…³äºè¦†ç›–æ ·å¼çš„è¯´æ˜ï¼š[Override style](https://github.com/sandoche/Darkmode.js#override-style)ã€‚å…¶ä¸­è®²åˆ°ï¼š

{% note info no-icon %}
* A CSS class darkmode--activated is added to the body tag when the darkmode is activated. You can take advantage of it to override the style and have a custom style

* Use the class darkmode-ignore where you don't want to apply darkmode

* You can also add this style: isolation: isolate; in your CSS, this will also ignore the darkmode.

* It is also possible to revert the Dark Mode with this style mix-blend-mode: difference;

{% endnote %}

ç¬¬ä¸€å¥è¯å¾ˆæ˜æ˜¾å‘ŠçŸ¥æˆ‘ä»¬è¯¥å¦‚ä½•è‡ªå®šä¹‰æ ·å¼ï¼Œäºæ˜¯è§£å†³é—®é¢˜ã€‚

æ·±å…¥æµè§ˆå®˜æ–¹æ–‡æ¡£å‘ç°å¾ˆå¤šé—®é¢˜éƒ½è±ç„¶å¼€æœ—ï¼Œå®˜æ–¹æ–‡æ¡£ç®—æ˜¯æœ€æƒå¨çš„æ•™ç¨‹ï¼

ä»¥åŠæ¥ä¸‹æ¥é€‚é…å„ç§å…ƒç´ çš„æ ·å¼ï¼Œæ›´æ˜¯è®©æˆ‘å¯¹ F12 æ›´åŠ ç†Ÿç»ƒï¼Œå¯¹å„ç§å±æ€§ä¹Ÿæ›´åŠ æ¸…æ™°ã€‚

ä¸Šè¿°ç»å†æ˜¯ä¸€ç§æˆé•¿ï¼Œåœ¨æ­¤å™è¿°ä»¥ç•™å¿µğŸ™ƒã€‚



<img alt="method1" class="gifplayer" src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/dark-one/an-one.png" >]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¢ç´¢â€œäº®/æš—â€ä¸»é¢˜å®ç°</title>
    <url>/009/</url>
    <content><![CDATA[
{% note success %}
å°è¯•ä¸ºåšå®¢æ·»åŠ ä¸€ä¸ªåˆ‡æ¢äº®æš—ä¸»é¢˜çš„åŠŸèƒ½ã€‚
{% endnote %}

<!--more-->

## ç‰ˆæœ¬ä¿¡æ¯

{% tabs version %}
<!-- tab Next -->

<strong><div align="center">versionï¼š8.2.1</div></strong>

<!-- endtab -->

<!-- tab Hexo-->
<strong><div align="center">hexo: 5.3.0
hexo-cli: 3.1.0</div></strong>
<!-- endtab -->

{% endtabs %}

---

## æ–¹æ³•ä¸€

1. ### æ¦‚è¿°
	ç®€å•çš„æ·»åŠ ä¸€ä¸ªbuttonæŒ‰é’®ï¼Œå¹¶ä¸ºæŒ‰é’®ä»¥åŠé»‘æš—æ¨¡å¼è®¾è®¡æ ·å¼ï¼Œæœ€ååŠ å…¥ä¸ºæŒ‰é’®çš„ onclick äº‹ä»¶è€Œè®¾è®¡çš„ js ä»£ç ã€‚
	
2. ### æ·»åŠ  button
	button çš„ä½ç½®å–å†³äºå­˜åœ¨å“ªä¸ªå…ƒç´ å¯¹åº”çš„ njk æ–‡ä»¶ä¸­ï¼Œè¿™é‡Œæˆ‘å°† button æ”¾åœ¨ sidebar ä¸­ã€‚æ•…è€Œå…ˆå‰å¾€ _config.yml å–æ¶ˆ custom_file_path å…³äº sidebar.njk çš„æ³¨é‡Šï¼Œç„¶ååœ¨`ç«™ç‚¹æ ¹ç›®å½•/source/_data`ä¸‹å»ºç«‹æ–‡ä»¶ sidebar.njkï¼ˆå·²æœ‰sidebar.njk çš„å¯å¿½ç•¥æ­¤æ­¥ï¼‰ã€‚åœ¨å…¶ä¸­åŠ å…¥ï¼š

   ```
   <a id="theme_change"
           type="button"
           onclick="theme_change()"
   >
      ğŸŒ
   </a>
   ```

3. ### è®¾è®¡æ ·å¼

   åŒç†å–æ¶ˆå…³äº styles.styl çš„æ³¨é‡Šå¹¶å»ºç«‹æ­¤æ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­åŠ å…¥å…³äºä¸»é¢˜åˆ‡æ¢ button çš„æ ·å¼ã€‚

   {% note info %}

   styles.styl ä¸­èƒ½åŠ å…¥åšå®¢æ‰€æœ‰å…ƒç´ çš„æ ·å¼è®¾è®¡ä»£ç ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæˆ‘è¿™åˆ©ç”¨ @import å¼•å…¥ç»å¯¹è·¯å¾„ä¸‹çš„æ ·å¼ä»£ç ã€‚

   {% endnote %}

   æ­¤å¤„çš„ button å±äºè‡ªå®šä¹‰å†…å®¹ï¼Œæ•…è€Œæˆ‘åœ¨ _data ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ customï¼Œå¹¶åœ¨å…¶ä¸­å»ºç«‹ dark-theme.stylï¼Œç„¶ååœ¨ styles.styl æ–‡ä»¶ä¸­åŠ å…¥ï¼š

   ```stylus
   /*è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼è®¾ç½®*/
   @import "custom/dark-theme";
   ```

   æœ€ååœ¨ dark-theme.styl ä¸­åŠ å…¥ï¼š

   ```stylus
   // é»‘æš—ä¸»é¢˜æ ·å¼
   body.dark-theme {
       background: #282c34		/* è®¾ç½®é»‘æš—ä¸»é¢˜èƒŒæ™¯é¢œè‰² */
   }
   ```

   è¿™é‡Œæˆ‘æ·»åŠ çš„ button å±äºè¶…é“¾æ¥ï¼ˆ`<a></a>`ï¼‰ï¼Œè‹¥åˆ©ç”¨`<button></button>`ï¼Œè¿˜èƒ½åœ¨ dark-theme.styl ä¸­è®¾è®¡ button å…ƒç´ çš„æ ·å¼ï¼Œè¯¦æƒ…è§[æ­¤æ–‡](http://pygo2.top/articles/41680/)ã€‚
   
4. ### æ·»åŠ  JS

   ç”±`onclick="theme_change()"`å¯çŸ¥å½“æˆ‘ä»¬ç‚¹å‡» ğŸŒ è¿™ä¸ª button æ—¶ï¼Œä¼šæ‰§è¡Œ`theme_change()` è¿™ä¸ªå‡½æ•°ã€‚æ‰€ä»¥è®¾è®¡å¹¶æ·»åŠ  `theme_change()`ï¼šå»ºç«‹`source/js/theme_change.js`æ–‡ä»¶ï¼Œåœ¨ theme_change.js ä¸­è®¾è®¡`theme_change()`ï¼Œæœ€åå¼•å…¥ theme_change.js ã€‚å…·ä½“å¦‚ä¸‹ï¼š

   ```javascript
   // source/js/theme_change.js
   // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
   function theme_change() {
       // åˆ‡æ¢å­—å†…å®¹
       var button = document.getElementById('theme_change');
       var pattern = new RegExp('ğŸŒ', 'i');
       if (pattern.test(button.innerHTML)){
           button.innerHTML = "ğŸŒ™";
       } else{
           button.innerHTML = "ğŸŒ";
       }	
       // åˆ‡æ¢ä¸»é¢˜
       document.body.classList.toggle('dark-theme');
   	setCookie("inner",button.innerHTML,1)
   };
   ```

   åŒå‰æ‰€è¿°ï¼Œå–æ¶ˆ footer.njk çš„æ³¨é‡Šï¼Œå¹¶å»ºç«‹`source/_data/footer.njk`ï¼ˆæ­¤æ–‡ä»¶ä»¥åŠ body-end.njk å‡è¢«æˆ‘ç”¨ä½œå¼•å…¥ jsï¼‰ã€‚footer.njk ä¸­åŠ å…¥ï¼š

   ```nginx
   {# è‡ªå®šä¹‰é»‘æš—ä¸»é¢˜åˆ‡æ¢ #}
   <script type="text/javascript" src="/js/theme_change.js"></script>
   ```

   è‡³æ­¤å·²å®Œæˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

   <img alt="method1" class="gifplayer" src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/try-light-dark-themes/method1.png" >
]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>å°è¯•åŠ å¯†åŠŸèƒ½</title>
    <url>/008/</url>
    <content><![CDATA[
æµ‹è¯•æ’ä»¶ hexo-blog-encryptã€‚
<!--more-->

```c
npm install --save hexo-blog-encrypt
```

```yaml
# æ–‡ç« åŠ å¯†åŠŸèƒ½
encrypt:
    enable: true
```

```yaml
password: åšå®¢å¯†ç 
abstract: home ä¸»é¡µæ˜¾ç¤ºçš„æ–‡å­—æç¤º
message: æŸ¥çœ‹åšå®¢ï¼Œå¯†ç è¾“å…¥æ¡†ä¸Šé¢çš„æè¿°æ€§æ–‡å­—
```

[hexo-blog-encrypt èµ„æ–™](https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md)ã€‚


{% fold ç‚¹å‡»æ˜¾/éšå†…å®¹ %}
```nginx
{% fold ç‚¹å‡»æ˜¾/éšå†…å®¹ %}
something you want to fold, include code block.
{% endfold %}
```
{% endfold %}]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°å½• tags ç”¨æ³•</title>
    <url>/7/</url>
    <content><![CDATA[
{% cq %}Nextä¸»é¢˜ä½¿ç”¨çš„å†…ç½®tagï¼Œå®˜æ–¹éƒ½å·²ç»å†™å¥½js

æˆ‘ä»¬åªè¦æ ¹æ®å®˜æ–¹æ•™ç¨‹è°ƒç”¨ï¼Œå°±å¯ä»¥å®ç°å¤šæ ·å¼ã€å¤šåŠŸèƒ½çš„æ•ˆæœã€‚{% endcq %}
<!--more-->

## è®¾ç½®

```yaml
# é…ç½®æ–‡ä»¶
# ---------------------------------------------------------------
# Tags Settings
# See: https://theme-next.js.org/docs/tag-plugins/
# ---------------------------------------------------------------

# Note tag (bootstrap callout)
note:
  # Note tag style values:
  #  - simple    bootstrap callout old alert style. Default.
  #  - modern    bootstrap callout new (v2-v3) alert style.
  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.
  #  - disabled  disable all CSS styles import of note tag.
  style: flat
  icons: false
  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).
  # Offset also applied to label tag variables. This option can work with disabled note tag.
  light_bg_offset: 0

# Tabs tag
tabs:
  transition:
  tabs: false
  labels: true

# PDF tag
# NexT will try to load pdf files natively, if failed, pdf.js will be used.
# So, you have to install the dependency of pdf.js if you want to use pdf tag and make it available to all browsers.
# Dependencies: https://github.com/next-theme/theme-next-pdf
pdf:
  enable: false
  # Default height
  height: 500px

# Mermaid tag
mermaid:
  enable: false
  # Available themes: default | dark | forest | neutral
  theme: forest
```

## ä½¿ç”¨

çœ‹[å®˜æ–¹æ–‡æ¡£](https://theme-next.js.org/docs/tag-plugins/)ã€‚

1. ### [Note](https://theme-next.js.org/docs/tag-plugins/note.html)

    #### é…ç½®

    ```
    note:
      # Note tag style values:
      #  - simple    bs-callout old alert style. Default.
      #  - modern    bs-callout new (v2-v3) alert style.
      #  - flat      flat callout style with background, like on Mozilla or StackOverflow.
      #  - disabled  disable all CSS styles import of note tag.
      style: modern
      icons: true
      # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).
      # Offset also applied to label tag variables. This option can work with disabled note tag.
      light_bg_offset: 0
    ```

    #### ç”¨æ³•

    ```nginx
    {% note default %}
    ##### Default Header
    Welcome to [Hexo!](https://hexo.io)
    {% endnote %}
    ```

    {% note default %}
    ##### Default Header
    Welcome to [Hexo!](https://hexo.io)
    {% endnote %}

    ```nginx
    {% note primary %}
    ##### Primary Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}
    ```

    {% note primary %}
    ##### Primary Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}

    ```nginx
    {% note info %}
    ##### Info Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}
    ```
    {% note info %}
    ##### Info Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}

    ```nginx
    {% note success %}
    ##### Success Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}
    ```

    {% note success %}
    ##### Success Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}

    ```nginx
    {% note warning %}
    ##### Warning Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}
    ```

    {% note warning %}
    ##### Warning Header
    **Welcome** to [Hexo!](https://hexo.io)
    {% endnote %}

2. ### [Tabs](https://theme-next.js.org/docs/tag-plugins/tabs.html)

    #### é…ç½®

    ```yaml
    tabs:
      transition:
        tabs: false
        labels: true
    ```

    #### ç”¨æ³•

    ```nginx
    {% tabs Unique name, [index] %}
    <!-- tab [Tab caption] [@icon] -->
    Any content (support inline tags too).
    <!-- endtab -->
    {% endtabs %}
    ```

    ```nginx
    {% tabs First unique name %}
    <!-- tab -->
    **This is Tab 1.**
    <!-- endtab -->

    <!-- tab -->
    **This is Tab 2.**
    <!-- endtab -->

    <!-- tab -->
    **This is Tab 3.**
    <!-- endtab -->
    {% endtabs %}
    ```

    {% tabs First unique name %}
    <!-- tab -->
    **This is Tab 1.**
    <!-- endtab -->

    <!-- tab -->
    **This is Tab 2.**
    <!-- endtab -->

    <!-- tab -->
    **This is Tab 3.**
    <!-- endtab -->
    {% endtabs %}

    å¯ä»¥åµŒå¥—ä½¿ç”¨

3. ### [Mermaid](https://theme-next.js.org/docs/tag-plugins/mermaid.html)

    #### é…ç½®

    ```yaml
    # Mermaid tag
    mermaid:
      enable: true
      # Available themes: default | dark | forest | neutral
      theme: forest
    ```

    #### ä½¿ç”¨

    ```nginx
    {% mermaid type %}
    {% endmermaid %}
    ```

    ```nginx
    {% mermaid graph TD %}
    A[Hard] -->|Text| B(Round)
    B --> C{Decision}
    C -->|One| D[Result 1]
    C -->|Two| E[Result 2]
    {% endmermaid %}
    ```

    ```nginx
    {% mermaid graph TD %}
    A[Christmas] -->|Get money| B(Go shopping)
    B --> C{Let me thinksssss<br/>ssssssssssssssssssssss}
    C -->|One| D[Laptop]
    C -->|Two| E[iPhone]
C -->|Three| F[Car]
    {% endmermaid %}
    ```
    
    <p class='div-border red'>æœ‰é”™è¯¯ï¼Œä¸ç”¨</p>
    
4. ### cq && centerquote

    ```nginx
    {% cq %}
    **æ–‡æœ¬å±…ä¸­**
    å¼•ç”¨æ ·å¼
    cq ä¸ centerquote ç­‰ä»·
    {% endcq %}
    ```

    {% centerquote %}
    **æ–‡æœ¬å±…ä¸­**
    å¼•ç”¨æ ·å¼
    cqä¸centerquoteç­‰ä»·
    {% endcenterquote %}

5. ### [Label](https://theme-next.js.org/docs/tag-plugins/label.html)

    ```nginx
    # å†…ç½®labelæ ‡ç­¾ã€‚
    {% label default@default %}
    {% label primary@primary %}
    {% label success@success %}
    {% label info@info %}
    {% label warning@warning %}
    {% label danger@danger %}
    ```


    <div align="center">
    {% label default@default %}
    {% label primary@primary %}
    {% label success@success %}
    {% label info@info %}
    {% label warning@warning %}
    {% label danger@danger %}
    </div>

6. ### [button && btn](https://theme-next.js.org/docs/tag-plugins/button.html)

    **å†…ç½®button**æ ‡ç­¾ã€‚btnä¸buttonç­‰ä»·ã€‚

    ```
    {% btn https://www.baidu.com, ç™¾åº¦é¦–é¡µ, download fa-lg fa-fw %}
    ```

    <div align="center">{% btn https://www.baidu.com, ç™¾åº¦é¦–é¡µ, download fa-lg fa-fw %}</div>

## å‚è€ƒæ–‡ç« 

* [Nextä¸»é¢˜ä¼˜åŒ–-å†…ç½®tagsç¯‡](http://pygo2.top/articles/25933/)

* [Tag Plugins](https://theme-next.js.org/docs/tag-plugins/)]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨ bash è„šæœ¬æé«˜æ•ˆç‡-git push</title>
    <url>/6/</url>
    <content><![CDATA[
{% cq %}æ¯æ¬¡æäº¤éƒ½è¦è¾“é‡å¤å‘½ä»¤

é‚æƒ³èƒ½å¦é€šè¿‡è„šæœ¬æ¥è‡ªåŠ¨æ‰§è¡Œï¼Œçœçš„æ‰‹åŠ¨é‡å¤è¾“å…¥è¿™ä¸‰ä¸ªå‘½ä»¤

ä¸Šç½‘æŸ¥è¯¢ï¼Œå‘ç°å¯ä»¥é€šè¿‡ bash å‘½ä»¤ã€‚{% endcq %}
<!--more-->

## æ¦‚è¿°

åˆ©ç”¨ git å‘½ä»¤æ›´æ–°ä»£ç ä»“åº“ï¼Œæ™®éä¸‰ä¸ªå‘½ä»¤ï¼š

```c
git add .
git commit -m "message"
git push origin main
```

æ¯æ¬¡æäº¤éƒ½è¦è¾“ä¸€éè¿™ä¸‰è¡Œï¼Œäºæ˜¯æƒ³åˆ°èƒ½å¦é€šè¿‡è„šæœ¬æ¥è‡ªåŠ¨æ‰§è¡Œè¿™ä¸‰ä¸ªï¼Œçœçš„æ‰‹åŠ¨é‡å¤è¾“å…¥è¿™ä¸‰ä¸ªå‘½ä»¤ã€‚ä¸Šç½‘æŸ¥è¯¢ï¼Œå‘ç°å¯ä»¥é€šè¿‡ bash å‘½ä»¤ã€‚

## å®ç°

æ ¹æ®ç½‘ä¸Šæ•™ç¨‹ï¼Œç¼–å†™å‡ºä»¥ä¸‹ä»£ç ï¼š

```bash
# å‘½åï¼šgit_WillCAI2020.bat
@echo off
echo "Introduction: Update the remote repository, written by ruchan"
echo "Steps:"

::æ³¨æ„ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„ä»“åº“åœ°å€
echo "1. Move to working directory" 
cd D:\Github\WillCAI2020\blog

echo "2. Display the status of the working directory and staging area" 
git status

echo "3. Start submitting code to the local repository"
git add .
 
echo "4. Commit the changes to the local repository"
set /p message=è¯·è¾“å…¥æäº¤ä¿¡æ¯ï¼š
echo %message%
git commit -m "%message%"
 
echo "5. Push the changes to the remote git server"
git push origin main
 
echo "You have successfully submitted!"
pause
```

æ­¥éª¤å¦‚ä»£ç ä¸­æ³¨é‡Šï¼Œé€šä¿—æ˜“æ‡‚ã€‚

æ³¨æ„ä¿®æ”¹ä»“åº“è·¯å¾„ï¼Œå‘½åä»¥ bat ç»“å°¾ï¼Œå­˜æ”¾ä½ç½®ä»»æ„ã€‚

æ‰§è¡Œä»£ç æ—¶ï¼Œè¿˜èƒ½æ‰‹åŠ¨è¾“å…¥å¾…æäº¤ä¿¡æ¯ï¼ˆåˆ©äºå¸®åŠ©ç®¡ç†ä»£ç ï¼‰ã€‚

ä½¿ç”¨æ—¶åŒå‡»è¿è¡Œå³å¯ã€‚

## æ‰©å±•

è¿˜æƒ³åˆ°èƒ½å¦é€šè¿‡ bash æ¥æ‰§è¡Œï¼š

```c
hexo clean && hexo g && hexo s
```

ç„¶åç›´æ¥æŠŠç›¸å…³å‘½ä»¤é€šè¿‡ dos è¿è¡Œï¼Œè¿™æ˜¯å‘ç°ç»“æœå¹¶ä¸å¦‚æ„¿ã€‚

äºæ˜¯å‘ç°åº”è¯¥å…ˆé€šè¿‡ bash å‘½ä»¤å¯åŠ¨ git-bashï¼Œç„¶ååœ¨ Git ä¸­æ‰§è¡Œ `hexo clean && hexo g && hexo s`ã€‚

å¾—åˆ°ï¼š

```bash
@echo off

echo "Introduction: Preview your hexo site locally, written by ruchan"
echo "Steps:"

start C:\ç¯å¢ƒ\Git\git-bash.exe --cd=D:\Github\WillCAI2020\blog -c "hexo clean && hexo g && hexo s"
```

è™½ç„¶å‘ç°èƒ½è¡Œï¼Œä½†é€Ÿåº¦ä¸å¤§æ»¡æ„ï¼Œè¿˜æ˜¯æ‰‹åŠ¨è¾“å§ã€‚

## å‚è€ƒ

* [Windows ä¸‹batè„šæœ¬gitæäº¤ä»£ç åˆ°github](https://blog.csdn.net/Ep_Little_prince/article/details/108895103)
* [.batè„šæœ¬åŸºæœ¬å‘½ä»¤è¯­æ³•](https://www.cnblogs.com/iTlijun/p/6137027.html)
* [.Batä¹‹æ‰¹å¤„ç†å®ç°æ‰‹åŠ¨è¾“å…¥å˜é‡å‚æ•°](https://blog.csdn.net/laozhuxinlu/article/details/52853787)
* [bat æ‰¹å¤„ç†æ•™ç¨‹](https://www.w3cschool.cn/dosmlxxsc1/wvqyr9.html)

]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>record</tag>
        <tag>git</tag>
        <tag>bat</tag>
      </tags>
  </entry>
  <entry>
    <title>æç¤ºï¼šYour branch is up to date  ...</title>
    <url>/5/</url>
    <content><![CDATA[
{% cq %}è§£å†³æç¤ºï¼š
â€œOn branch main
Your branch is up to date with 'origin/main'.â€
ä¸èƒ½ä¸Šä¼ ä»£ç çš„é—®é¢˜ã€‚{% endcq %}
<!--more-->
## è®°å½•

æ‰§è¡Œ git status å‘ç°æç¤ºï¼š

```c
On branch main
Your branch is up to date with 'origin/main'.
```

ç›´æ¥ `git add .`ã€`git commit -m "ä¿®æ”¹"`ï¼Œ`git push origin main`ï¼Œå‘ç°æ— æ³•æäº¤ã€‚

äºæ˜¯æœç´¢ï¼Œæ ¹æ®è¿™ç¯‡æ–‡ç« ï¼š [git commitæç¤ºYour branch is up-to-date with 'origin/master'.](https://www.jianshu.com/p/e25c763b9816)ï¼Œè®¤ä¸ºæ˜¯ç‰ˆæœ¬åˆ†æ”¯çš„åŸå› ï¼ˆä¸å¤§æ‡‚ï¼‰ã€‚

1. ### æ–°å»ºåˆ†æ”¯

    ```c
    git branch newbranch
    //æŸ¥çœ‹æ˜¯å¦æ˜¯å¦åˆ›å»ºæˆåŠŸ
    git branch 
    //è‹¥ç»“æœä¸­æœ‰ newbranchï¼Œå³æˆåŠŸ
    ```

2. ### åˆ‡æ¢æ–°åˆ†æ”¯å¹¶æäº¤æ”¹åŠ¨

    ```c
    git checkout newbranch
        git add . 
    git commit -m "æ”¹åŠ¨"
    ```

3. ### åˆ‡æ¢ä¸»åˆ†æ”¯å¹¶åˆå¹¶æ”¹åŠ¨

    ```c
    git checkout master
    git merge newbranch 
    ```

4. ### æäº¤ä»£ç 

    ```c
    git push -u origin master
    ```

5. ### åˆ é™¤æ–°åˆ†æ”¯

    ```c
    git branch -D newbranch
    ```


## åè®°

å®Œæˆä¸Šè¿°æµç¨‹åï¼Œå·²èƒ½æäº¤ä»£ç ï¼Œä½†æ˜¯ä»ä¼šæç¤ºï¼š

```
On branch main
Your branch is up to date with 'origin/main'.
```

æ ¹æ®[æ­¤æ–‡](https://blog.csdn.net/S_o_l_o_n/article/details/108130341)ï¼Œæš‚ä¸ç†ä¼šã€‚]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>record</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ç° Github Actions æŒç»­éƒ¨ç½²</title>
    <url>/4/</url>
    <content><![CDATA[
{% cq %}å®Œæ•´å®ç° Github Actions æŒç»­éƒ¨ç½²ï¼{% endcq %}
<!--more-->

## æ›´æ–°

æµè§ˆ Docker æ–¹æ³•ï¼Œå‘ç°å®ƒæ¨¡æ‹Ÿçš„æ˜¯æœ¬åœ°ç”Ÿæˆ SSH å¯†é’¥ï¼Œç„¶åé€šè¿‡å¯†é’¥è¿æ¥å¹¶æ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“ã€‚æˆ‘ä¹Ÿå°è¯•æŠŠ `entrypoint.sh`ä¸­çš„å‘½ä»¤åŒ–ä¸ºä¸€ä¸ªä¸ªæ­¥éª¤ï¼Œç›´æ¥æ”¾åœ¨ jobs ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åœ¨ Docker å®¹å™¨ä¸­ï¼Œä½†æ˜¯å‘ç°æˆ‘ä¸ä¼š linuxï¼Œæ‰€ä»¥åé¢å†è¯´ã€‚

æœ€ç»ˆé€‰æ‹©ä»ä»¥ token ä¸ºè·¯å¾„ï¼Œæ¥æäº¤ä»£ç ã€‚

## å®ç°

ä»£ç å¦‚ä¸‹ï¼š

```
# æ–‡ä»¶è·¯å¾„ .github/workflows/deployment.yml
name: Deployment

on:
  push:
    branches: [main] # only push events on source branch trigger deployment

jobs:
  hexo-deployment:
    runs-on: ubuntu-latest
    env:
      TZ: Asia/Shanghai

    steps:
    - name: Checkout source
      uses: actions/checkout@v2
      with:
        submodules: true

    - name: Setup Node.js
      uses: actions/setup-node@v1
      with:
        node-version: '12.x'
        
    - name: Install dependencies & Generate static files
      run: |
        node -v
        npm i -g hexo-cli
        npm i
        hexo clean
        hexo g        
    - name: Deploy to Github Pages
      env:
        GIT_NAME: WillCAI2020
        GIT_EMAIL: ${{ secrets.GIT_EMAIL_BLOG }}
        REPO: github.com/WillCAI2020/WillCAI2020.github.io
        GH_TOKEN: ${{ secrets.GH_TOKEN_BLOG }}
      run: |
        cd ./public && git init && git checkout -b main && git add .
        git config --global user.name $GIT_NAME
        git config --global user.email $GIT_EMAIL
        git commit -m "GitHub Actions Auto Builder at $(date +'%Y-%m-%d %H:%M:%S')"
        git push --force --quiet "https://$GH_TOKEN@$REPO" main:main

```

## æ³¨æ„

å˜é‡å‘½åä»¥åŠæ­¥éª¤è§£é‡Šåœ¨æ­¤æ–‡å‡æœ‰è®²è§£ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚

1. ### åˆ†æ”¯

    2020å¹´10æœˆä»½å¼€å§‹ GitHub æŠŠé»˜è®¤çš„ master åˆ†æ”¯æ¢æˆäº† main åˆ†æ”¯ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘åœ¨è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ä¹Ÿè®¾ä¸ºäº† main åˆ†æ”¯ã€‚è¿™é‡Œæ³¨æ„ï¼šæœ¬åœ° `git init`åé»˜è®¤ä»ä¸º master åˆ†æ”¯ï¼Œæ­¤æ—¶åº”å°†æ–°å»º main åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ° main åˆ†æ”¯ã€‚

    ```c
    //æ–°å»º main åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ° main åˆ†æ”¯
    git checkout -b main
    ```

2. ### ä»“åº“

    æˆ‘çš„æºç æ”¾åœ¨äº†ä»“åº“ blog ä¸­ï¼Œä½†æ˜¯ä¸ºä½¿ç”¨ gh-pagesï¼Œç”Ÿæˆçš„ public é™æ€æ–‡ä»¶å¿…é¡»æ”¾åœ¨ username.github.io çš„ä»“åº“ä¸­ã€‚

    æ•…è€Œæ·»åŠ çš„ Secrets å˜é‡å‡åœ¨ bolg ä»“åº“ä¸­ã€‚


## é”™è¯¯æ€»ç»“

åŸæœ¬æˆ‘çš„ä»“åº“å‡åªæœ‰ main åˆ†æ”¯ï¼Œè€Œ jobs ä»£ç å¹¶æœªåŠ ä¸Š `git checkout -b main`ï¼Œå¯¼è‡´æŠ¥é”™ `error: failed to push some refs to`ï¼Œæ ¹æ®[æ­¤æ–‡](https://www.jianshu.com/p/c6f2e1ca2999)ï¼ŒåŒæ—¶æµè§ˆäº† [Git push è®²è§£](https://www.yiibai.com/git/git_push.html)ï¼Œç„¶åä»â€œåˆ†æ”¯åä¸å®Œæ•´ã€æ²¡æœ‰æäº¤ä»£ç ã€æœ¬åœ°ä¸è¿œç¨‹äº§ç”Ÿå†²çªâ€å…¥æ‰‹ã€‚

ç»è¿‡ä¸€ç•ªè‹¦æ€ï¼Œçªç„¶æƒ³åˆ°æŠŠè¿œç¨‹é‚£è™šæ‹Ÿä¸»æœºå½“æˆè‡ªå·±çš„ç”µè„‘ï¼Œç›´æ¥ `git init`ï¼Œç„¶å `git add .`ï¼Œæäº¤çš„ä¸å°±æ˜¯æœ¬åœ°çš„ master åˆ†æ”¯å—ï¼Œä½†æ˜¯æˆ‘ `git push`æŒ‡æ˜æœ¬åœ°çš„æ˜¯ main åˆ†æ”¯ï¼Œè€Œ main åˆ†æ”¯ä¸å­˜åœ¨å½“ç„¶ä¼šæŠ¥é”™ï¼Œäºæ˜¯åŠ ä¸Š `git checkout -b main`ï¼Œè§£å†³é—®é¢˜ã€‚]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>record</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°å½•</title>
    <url>/2/</url>
    <content><![CDATA[
{% cq %}éšæ‰‹è®°ã€‚{% endcq %}

<!--more-->

```
hexo init
git init
ç”±äºä½¿ç”¨SSHå¤šè´¦å·ï¼Œæ•…è€Œæ·»åŠ è¿œç¨‹åœ°å€æ—¶è¦æ³¨æ„
ä¸ºGithub Actions åšå‡†å¤‡
ç”±äºæƒ³åœ¨blogä»“åº“æ”¾æºç ï¼ˆè¦éƒ¨ç½²çš„æ–‡ä»¶ä¸€å®šå¾—æ”¾åœ¨username.github.ioä»“åº“ä¸­ï¼‰ï¼Œæ•…è€Œæ–°ç”Ÿæˆä¸€ä¸ªSSHå¯†é’¥ï¼Œå…¬é’¥ä½œä¸ºusername.github.ioçš„Deploy KEYï¼Œç§é’¥ä½œä¸ºblogçš„å˜é‡
```

```css
html,body {
	margin: 0;
	padding:0;
	height: 100%;
}

.main{
	min-height:100%;
	height: auto !important;
	height: 100%; /*IE6ä¸è¯†åˆ«min-height*/
	position: relative;
}

.main-inner{
	margin: 0 auto;
	padding-bottom: 80px;
}
	
.footer{
	position: absolute;
	bottom: 0;
	width: 100%;
	height: 60px;
	clear: both;
}
```

```
git clone https://github.com/theme-next/theme-next-canvas-ribbon source/lib/canvas_ribbon
```

```
git submodule add --depth 1 https://github.com/theme-next/theme-next-canvas-ribbon source/lib/canvas_ribbon
```

```
git rm -r --cached source/lib/canvas_ribbon
```

```
git submodule add --depth 1 https://github.com/theme-next/theme-next-canvas-nest source/lib/canvas-nest
```

```
git rm -r --cached source/lib/canvas-nest
```

```
git rm -r --cached _config.landscape.yml
```

```
npm install hexo-generator-searchdb --save
```

```
https://github.com/WillCAI2020/blog/edit/main/source/
```

<img class="lazyload" src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/loading_cai.gif" data-src="https://s3.ax1x.com/2021/02/09/yaffns.png"  alt="å½©è‰²æ ‡ç­¾é¡µ">

```
a7ee87d5b4b364c71deb97c0a88976b982c41c01
```

```
git rm -r --cached actions
```

```
52a73c0d7f6af17588b4941829cd0ef8da372875
```

```
htmlæ˜¯ç”±å¾ˆå¤šå…ƒç´ ç»„æˆçš„ï¼Œè€Œæ¯ä¸ªå…ƒç´ çš„æ ·å¼ç”±cssæ§åˆ¶ï¼Œcssæœ‰å¾ˆå¤šå±æ€§ï¼Œæ¯”å¦‚è¿™ä¸ªbackgroundï¼Œè¿˜æœ‰è¿™ä¸ªè®¾ç½®é€æ˜åº¦çš„ï¼Œè®¾ç½®å†…è¾¹è·(padding)ï¼Œå¤–è¾¹è·(margin)çš„ã€‚
æˆ‘ä»¬è¦å……åˆ†åˆ©ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œè°·æ­Œæµè§ˆå™¨æ˜¯F12ï¼ŒEdgeä¹Ÿæ˜¯ï¼Œä½ çœ‹ï¼Œæˆ‘ç”¨è¿™ä¸ªé€‰ä¸­æˆ‘æƒ³ä¿®æ”¹çš„å…ƒç´ ï¼Œè€Œå…ƒç´ çš„æ ·å¼å¯ä»¥é€šè¿‡ä¸€ä¸ªåˆä¸€ä¸ªçš„ç±»æ¥æ§åˆ¶ï¼Œä½ çœ‹è¿™ä¸ªpost-blockç±»ï¼Œï¼ˆclasså°±æ˜¯ç±»çš„æ„æ€ï¼šclass="post-block"ï¼‰ï¼Œåœ¨cssï¼Œæˆ‘ä»¬é€šè¿‡ .post-blockæ¥ä¸ºç±»è®¾ç½®å±æ€§ï¼Œä½ çœ‹æˆ‘æ”¹å˜å®ƒçš„background
```

```c
git submodule add --depth 1 https://github.com/theme-next/theme-next-pace source/lib/pace
```

![åŠ è½½è¿›åº¦æ¡](https://s3.ax1x.com/2021/02/09/ydzxJS.png)

```
git submodule add --depth 1 https://github.com/stevenjoezhang/live2d-widget.git source/lib/live2d-widget
```

<img class="lazyload" src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/loading_cai.gif" data-src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/try-light-dark-themes/method1.png" alt="test1">

<hr>

<img class="lazyload" src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/loading_cai.gif" data-src="https://i.loli.net/2021/02/16/x39c4XnuqQeCgt7.jpg" alt="test2">

<hr>

<img class="lazyload" src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn/images/loading_cai.gif" data-src="https://i.loli.net/2021/02/16/ze5hlG1NIERATts.jpg" alt="test3">



```html
<div class='tip'><p>é»˜è®¤æƒ…å†µ<p></div>
<div class='tip success'><p>success<p></div>
<div class='tip error'><p>error<p></div>
<div class='tip warning'><p>warning<p></div>
```

<div class='tip'><p>é»˜è®¤æƒ…å†µ<p></div>
<div class='tip success'><p>success<p></div>
<div class='tip error'><p>error<p></div>
<div class='tip warning'><p>warning<p></div>

```
<a href="https://willcai2020.github.io/" class="LinkCard">æ¬¢è¿æ¥åˆ°â€”â€”æˆ‘çš„å°ç«™</a>
```

<a href="https://willcai2020.github.io/" class="LinkCard">æ¬¢è¿æ¥åˆ°â€”â€”æˆ‘çš„å°ç«™</a>

```
/* noteè¯­æ³•ç¤ºä¾‹ */
<p class='div-border green'>ç»¿è‰²</p>
<p class='div-border red'>çº¢è‰²</p>
<p class='div-border yellow'>é»„è‰²</p>
<p class='div-border grey'>ç°è‰²</p>
<p class='div-border blue'>è“è‰²</p>

/* å°tagæ ‡ç­¾è¯­æ³•ç¤ºä¾‹ */
<span class="inline-tag red">çº¢è‰²å°æ ‡ç­¾</span>
<span class="inline-tag green">ç»¿è‰²å°æ ‡ç­¾</span>
<span class="inline-tag blue">è“è‰²å°æ ‡ç­¾</span>
<span class="inline-tag yellow">é»„è‰²å°æ ‡ç­¾</span>
<span class="inline-tag grey">ç°è‰²å°æ ‡ç­¾</span>
```
/* noteè¯­æ³•ç¤ºä¾‹ */
<p class='div-border green'>ç»¿è‰²</p>
<p class='div-border red'>çº¢è‰²</p>
<p class='div-border yellow'>é»„è‰²</p>
<p class='div-border grey'>ç°è‰²</p>
<p class='div-border blue'>è“è‰²</p>

/* å°tagæ ‡ç­¾è¯­æ³•ç¤ºä¾‹ */
<span class="inline-tag red">çº¢è‰²å°æ ‡ç­¾</span>
<span class="inline-tag green">ç»¿è‰²å°æ ‡ç­¾</span>
<span class="inline-tag blue">è“è‰²å°æ ‡ç­¾</span>
<span class="inline-tag yellow">é»„è‰²å°æ ‡ç­¾</span>
<span class="inline-tag grey">ç°è‰²å°æ ‡ç­¾</span>

è¯•éªŒpanguï¼Œæ­¤è¡Œä¸­è‹±æ–‡é—´æœªåŠ ç©ºæ ¼ã€‚

æ¥tryagainï¼Œè¿™æ˜¯panguï¼Œèƒ½ç»™æ–‡ç« ä¸­Englishæ·»åŠ spaceã€‚]]></content>
      <categories>
        <category>åšå®¢</category>
      </categories>
      <tags>
        <tag>record</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
